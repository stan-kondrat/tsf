var TSF=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.requestAnimationFrame||function(e){return window.setTimeout(e,0)};t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=r(a),c=n(2),l=r(c),s=[];for(var f in document)f.startsWith("on")&&s.push(f);var p=function(){function e(t){o(this,e),this.initializedComponents=new Map,this.componentClasses=new Map,this.watcher=new l.default,this.rootElement=document.querySelector(t)}return i(e,[{key:"register",value:function(e,t){this.componentClasses.set(e,t)}},{key:"component",value:function(e,t){this.initializedComponents.set(e,t)}},{key:"run",value:function(e){this.process(e,this.rootElement)}},{key:"process",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];n.innerHTML=e.prepareTemplate(r||t.$template);var a=this.prepareDynamicIf(t,n),u=this.prepareDynamicFor(t,n),c=this.processTextNodes(t,n,o,i),l=a.concat(u).concat(c);this.watcher.observe(t,l),this.processEvents(t,n),this.processComponents(n),this.processDynamic(t,n,a),this.processDynamic(t,n,u)}},{key:"processTextNodes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[],i=t.querySelectorAll("[\\$innerHTML]");return[].forEach.call(i,function(t){var i=t.getAttribute("$innerHTML"),a=document.createTextNode(""),u=new Function(n.join(","),"return "+i);t.parentNode.replaceChild(a,t);var c={expr:i,component:e,customVarNames:n,customVarValues:r,textNode:a,evalFunction:u,compile:function(){a.data=u.apply(e,r)}};o.push(c),c.compile()}),o}},{key:"processEvents",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=s[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)!function(){var n=i.value,r=t.querySelectorAll("[\\$"+n+"]");[].forEach.call(r,function(t){var r=new Function("$event",t.getAttribute("$"+n));t.removeAttribute("$"+n),t.addEventListener(n.substring(2),function(t){(0,u.default)(function(){return r.call(e,t)})})})}()}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"prepareDynamicIf",value:function(e,t){for(var n=this,r=[],o=t.querySelector("[\\$if]");o&&o.getAttribute;)!function(){var i=o.getAttribute("$if");o.removeAttribute("$if");var a=o.outerHTML,u=document.createTextNode(""),c=new Function("","return "+i);o.parentNode.replaceChild(u,o);var l=void 0,s={expr:i,component:e,customVarNames:[],customVarValues:[],textNode:u,evalFunction:c,compile:function(){c.apply(e)?(l=n.newElement(a),u.parentNode.insertBefore(l,u),n.process(e,l,l.innerHTML)):l&&(l.remove(),l=null)}};r.push(s),o=t.querySelector("[\\$if]")}();return r}},{key:"prepareDynamicFor",value:function(e,t){for(var n=this,r=[],o=t.querySelector("[\\$for]");o&&o.getAttribute;)!function(){var i=o.getAttribute("$for");o.removeAttribute("$for");var a=o.outerHTML,u=document.createTextNode(""),c=new Function("","return "+i);o.parentNode.replaceChild(u,o);var l=[],s={expr:i,component:e,customVarNames:[],customVarValues:[],textNode:u,evalFunction:c,compile:function(t){if(t&&"update"===t.type);else if(t&&"push"===t.type)for(var r=c.apply(e),o=l.length;o<r.length;o++){var i=n.newElement(a);u.parentNode.insertBefore(i,u),l.push({element:i}),n.process(e,i,i.innerHTML,["$index"],[o])}else{l.length&&(l.forEach(function(e,t){e.element.remove()}),l.length=0);var s=c.apply(e);s.forEach(function(t,r){var o=n.newElement(a);u.parentNode.insertBefore(o,u),l.push({element:o}),n.process(e,o,o.innerHTML,["$index"],[r])})}}};r.push(s),o=t.querySelector("[\\$for]")}();return r}},{key:"processDynamic",value:function(e,t,n){n.forEach(function(e){return e.compile()})}},{key:"processComponents",value:function(e){var t=this;this.initializedComponents.forEach(function(n,r){var o=e.querySelector(r);o&&t.process(n,o)}),this.componentClasses.forEach(function(n,r){var o=e.querySelectorAll(r);[].forEach.call(o,function(e){t.process(new n,e)})})}},{key:"newElement",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}}],[{key:"prepareTemplate",value:function(e){return e=e.replace(new RegExp("{{([^}]+)}}","g"),function(e,t){return'<text $innerHTML="'+t+'"></text>'})}}]),e}();t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),c=function(){function e(){r(this,e),this.allWatchedObjects=new Map,this.bindingsByAttr={}}return i(e,[{key:"observe",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"this.";if("object"===(void 0===t?"undefined":o(t))){var i=void 0;this.allWatchedObjects.has(t)?(i=this.allWatchedObjects.get(t),i=i.concat(n)):i=n,this.allWatchedObjects.set(t,i),e.isObject(t)&&this.observeObject(t,n,r),e.isArray(t)&&this.observeArray(t,n,r)}}},{key:"compileBinding",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.allWatchedObjects.get(e);(0,u.default)(function(){r.forEach(function(e){var r=t,o=void 0;do{-1!==e.expr.indexOf(r)&&e.compile(n),o=r.lastIndexOf("."),r=t.substr(0,o)}while(4!==o)})})}},{key:"observeObject",value:function(e,t,n){var r=this,o={};"$data"in e?o=e.$data:Object.defineProperty(e,"$data",{value:o,writable:!0});for(var i in e){(function(i){if(!e.hasOwnProperty(i))return"continue";if("$template"===i||"$data"===i)return"continue";var a=n+i;o[a]=e[i],r.observe(e[i],t,a+"."),Object.defineProperty(e,i,{get:function(){return o[a]},set:function(n){o[a]=n,r.observe(n,t,a+"."),r.compileBinding(e,a)}})})(i)}}},{key:"observeArray",value:function(e,t,n){var r=this;if(!("$data"in e)){var o=[];Object.defineProperty(e,"$data",{value:o,writable:!0});for(var i=0;i<e.length;i++)o[i]=e[i],this.observeArrayDefineIndexProperty(e,t,i,n);Object.defineProperty(e,"push",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];var c=o.length,l=!0,s=!1,f=void 0;try{for(var p,v=a[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var d=p.value;o[c]=d,r.observe(d,t,n+"."+c+"."),r.observeArrayDefineIndexProperty(e,t,c,n),c++}}catch(e){s=!0,f=e}finally{try{!l&&v.return&&v.return()}finally{if(s)throw f}}return r.compileBinding(e,n,{type:"push"}),c}}),Object.defineProperty(e,"splice",{configurable:!1,enumerable:!1,writable:!1,value:function(i,a){for(var u=arguments.length,c=Array(u>2?u-2:0),l=2;l<u;l++)c[l-2]=arguments[l];i=null==i?0:i<0?o.length+i:i,a=null==a?o.length-i:a>0?a:0;for(var s=[];a--;)s.push(o.splice(i,1)[0]),e.length=o.length;var f=!0,p=!1,v=void 0;try{for(var d,y=c[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var h=d.value;o.splice(i,0,h),r.observeArrayDefineIndexProperty(e,t,o.length-1,n)}}catch(e){p=!0,v=e}finally{try{!f&&y.return&&y.return()}finally{if(p)throw v}}return r.compileBinding(e,n),s}})}}},{key:"observeArrayDefineIndexProperty",value:function(e,t,n,r){var o=this;Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){return e.$data[n]},set:function(i){e.$data[n]=i,o.observe(i,t,r+"."+n+"."),o.compileBinding(e,r,{type:"update",value:n})}})}}],[{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.apply(e)}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.apply(e)}}]),e}();t.default=c,e.exports=t.default}]);